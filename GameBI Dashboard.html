<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GameBI - Dashboard Executivo (Din√¢mico por Per√≠odo)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .card-shadow { box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    .metric-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .metric-card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.15); }
    .tab-active { background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; }
    .chart-container { position: relative; height: 300px; }
    .sidebar { background: linear-gradient(180deg, #1e293b 0%, #334155 100%); }
    .game-icon { width: 24px; height: 24px; border-radius: 4px; }
    .segmented button { border: 1px solid rgba(0,0,0,0.1); }
    .segmented button[aria-pressed="true"] { background: #4f46e5; color: white; }
    .table-header { background: #f8fafc; }
    .number-cell { font-variant-numeric: tabular-nums; }
  </style>
</head>
<body class="bg-gray-50 font-sans">
  <!-- Header -->
  <header class="gradient-bg text-white p-4 shadow-lg">
    <div class="flex justify-between items-center max-w-7xl mx-auto">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
          <span class="text-2xl">üéÆ</span>
        </div>
        <div>
          <h1 class="text-2xl font-bold">GameBI Dashboard</h1>
          <p class="text-sm opacity-90">An√°lise Estrat√©gica de Contas de Jogos</p>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <div class="text-right">
          <p class="text-sm opacity-90">√öltima atualiza√ß√£o</p>
          <p class="font-semibold" id="lastUpdate"></p>
        </div>
        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
          <span class="text-xl">üë§</span>
        </div>
      </div>
    </div>
  </header>

  <div class="flex max-w-7xl mx-auto">
    <!-- Sidebar -->
    <div class="sidebar w-64 min-h-screen p-4 text-white">
      <nav class="space-y-2">
        <button onclick="showTab('dashboard')" class="tab-btn w-full text-left p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-all tab-active" data-tab="dashboard">üìä Dashboard Principal</button>
        <button onclick="showTab('products')" class="tab-btn w-full text-left p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-all" data-tab="products">üéÆ An√°lise de Produtos</button>
        <button onclick="showTab('inventory')" class="tab-btn w-full text-left p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-all" data-tab="inventory">üì¶ Gest√£o de Estoque</button>
        <button onclick="showTab('resellers')" class="tab-btn w-full text-left p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-all" data-tab="resellers">ü§ù Portal Revendedores</button>
        <button onclick="showTab('competition')" class="tab-btn w-full text-left p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-all" data-tab="competition">‚öîÔ∏è An√°lise Competitiva</button>
        <button onclick="showTab('simulator')" class="tab-btn w-full text-left p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-all" data-tab="simulator">üí∞ Simulador de Pre√ßos</button>
      </nav>

      <!-- Filtros Globais -->
      <div class="mt-8 space-y-4">
        <h3 class="font-semibold text-lg">Filtros Globais</h3>
        <div>
          <label class="block text-sm mb-2">Per√≠odo</label>
          <select class="w-full p-2 rounded bg-white bg-opacity-10 border border-white border-opacity-20">
            <option>√öltimos 30 dias</option>
            <option>√öltimos 90 dias</option>
            <option>Este ano</option>
            <option>Personalizado</option>
          </select>
        </div>
        <div>
          <label class="block text-sm mb-2">Jogo</label>
          <select class="w-full p-2 rounded bg-white bg-opacity-10 border border-white border-opacity-20">
            <option>Todos os jogos</option>
            <option>Genshin Impact</option>
            <option>Zenless Zone Zero</option>
            <option>Honkai Star Rail</option>
            <option>Wuthering Waves</option>
            <option>Solo Leveling ARISE</option>
            <option>Dragon Ball Legends</option>
          </select>
        </div>
        <div>
          <label class="block text-sm mb-2">Plataforma</label>
          <select class="w-full p-2 rounded bg-white bg-opacity-10 border border-white border-opacity-20">
            <option>Todas</option>
            <option>Discord Bot</option>
            <option>GGMAX</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 p-6">
      <!-- Dashboard Principal -->
      <div id="dashboard" class="tab-content">
        <!-- KPIs Principais -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <div class="metric-card bg-white p-6 rounded-xl card-shadow">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-gray-600 text-sm">Faturamento L√≠quido</p>
                <p class="text-3xl font-bold text-green-600" id="kpiNetRevenue">R$ 0,00</p>
                <p class="text-sm text-green-500" id="kpiNetRevenueDelta">‚Üó +0% vs per√≠odo anterior</p>
              </div>
              <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">üí∞</span>
              </div>
            </div>
          </div>

          <div class="metric-card bg-white p-6 rounded-xl card-shadow">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-gray-600 text-sm">Produtos Vendidos</p>
                <p class="text-3xl font-bold text-blue-600" id="kpiUnits">0</p>
                <p class="text-sm text-blue-500" id="kpiUnitsDelta">‚Üó +0% vs per√≠odo anterior</p>
              </div>
              <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">üì¶</span>
              </div>
            </div>
          </div>

          <!-- Faturamento Parceiros + Clientes -->
          <div class="metric-card bg-white p-6 rounded-xl card-shadow">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-gray-600 text-sm">Faturamento Parceiros</p>
                <p class="text-3xl font-bold text-purple-600" id="kpiPartnersRevenue">R$ 0,00</p>
                <p class="text-sm text-purple-500">Clientes: <span class="font-semibold" id="kpiClients">0</span></p>
              </div>
              <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">ü§ù</span>
              </div>
            </div>
          </div>

          <!-- Ticket M√©dio -->
          <div class="metric-card bg-white p-6 rounded-xl card-shadow">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-gray-600 text-sm">Ticket M√©dio</p>
                <p class="text-3xl font-bold text-orange-600" id="kpiAvgTicket">R$ 0,00</p>
                <p class="text-sm text-orange-500">‚âà por pedido</p>
              </div>
              <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                <span class="text-2xl">üéüÔ∏è</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Gr√°ficos/Tabelas Principais -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
          <!-- Faturamento por Per√≠odo com seletor -->
          <div class="bg-white p-6 rounded-xl card-shadow">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-semibold">Faturamento por Per√≠odo</h3>
              <div class="segmented inline-flex rounded-lg overflow-hidden">
                <button class="px-3 py-1 text-sm" id="btn-dia" aria-pressed="true" onclick="setPeriod('dia')">Dia</button>
                <button class="px-3 py-1 text-sm" id="btn-semana" aria-pressed="false" onclick="setPeriod('semana')">Semana</button>
                <button class="px-3 py-1 text-sm" id="btn-mes" aria-pressed="false" onclick="setPeriod('mes')">M√™s</button>
                <button class="px-3 py-1 text-sm" id="btn-custom" aria-pressed="false" onclick="setPeriod('custom')">Personalizado</button>
              </div>
            </div>
            <div id="customRange" class="grid grid-cols-2 gap-3 mb-3 hidden">
              <input type="date" class="p-2 border rounded-lg" />
              <input type="date" class="p-2 border rounded-lg" />
            </div>
            <div class="chart-container">
              <canvas id="revenueChart"></canvas>
            </div>
          </div>

          <!-- Tabela por jogo -->
          <div class="bg-white p-6 rounded-xl card-shadow">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-lg font-semibold">Vendas por Jogo (Per√≠odo selecionado)</h3>
              <span id="periodLabel" class="text-sm text-gray-500"></span>
            </div>
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="table-header">
                  <tr class="border-b">
                    <th class="text-left p-3">Jogo</th>
                    <th class="text-left p-3">Faturamento L√≠quido</th>
                    <th class="text-left p-3">Qtd. Vendas</th>
                  </tr>
                </thead>
                <tbody id="gamesTableBody"></tbody>
                <tfoot>
                  <tr class="border-t bg-gray-50">
                    <td class="p-3 font-semibold">Total</td>
                    <td class="p-3 font-semibold number-cell" id="gamesTotalRevenue">R$ 0,00</td>
                    <td class="p-3 font-semibold number-cell" id="gamesTotalQty">0</td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>

        <!-- Top Produtos e Criadores -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="bg-white p-6 rounded-xl card-shadow">
            <h3 class="text-lg font-semibold mb-4">Top 5 Produtos Mais Vendidos</h3>
            <div class="space-y-4" id="topProducts">
              <!-- preenchido via JS conforme per√≠odo -->
            </div>
          </div>

          <!-- Tabela: Criadores de Conte√∫do -->
          <div class="bg-white p-6 rounded-xl card-shadow">
            <h3 class="text-lg font-semibold mb-4">Criadores de Conte√∫do - Desempenho</h3>
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="table-header">
                  <tr class="border-b">
                    <th class="text-left p-3">Criador</th>
                    <th class="text-left p-3">Cupons Usados</th>
                    <th class="text-left p-3">Comiss√£o</th>
                    <th class="text-left p-3">Receita L√≠quida</th>
                    <th class="text-left p-3">ROI (Rec. L√≠quida / Comiss√£o)</th>
                    <th class="text-left p-3">Rank (‚Üë ROI)</th>
                  </tr>
                </thead>
                <tbody id="creatorsBody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Outras abas (dummy visual) -->
      <div id="products" class="tab-content hidden">
        <div class="bg-white p-6 rounded-xl card-shadow mb-6">
          <h2 class="text-2xl font-bold mb-6">An√°lise Detalhada de Produtos</h2>
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-xl text-white">
              <h3 class="text-lg font-semibold mb-2">Produto Mais Vendido</h3>
              <p class="text-2xl font-bold">Genshin Impact AR 60</p>
              <p class="text-sm opacity-90">324 unidades vendidas</p>
            </div>
            <div class="bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-xl text-white">
              <h3 class="text-lg font-semibold mb-2">Maior Margem</h3>
              <p class="text-2xl font-bold">Dragon Ball Legends</p>
              <p class="text-sm opacity-90">58.3% de margem</p>
            </div>
            <div class="bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-xl text-white">
              <h3 class="text-lg font-semibold mb-2">Crescimento</h3>
              <p class="text-2xl font-bold">Solo Leveling ARISE</p>
              <p class="text-sm opacity-90">+45% vs m√™s anterior</p>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div>
              <h3 class="text-lg font-semibold mb-4">Performance por Categoria</h3>
              <div class="chart-container">
                <canvas id="categoryChart"></canvas>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-semibold mb-4">Evolu√ß√£o de Vendas</h3>
              <div class="chart-container">
                <canvas id="evolutionChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="inventory" class="tab-content hidden">
        <div class="bg-white p-6 rounded-xl card-shadow mb-6">
          <h2 class="text-2xl font-bold mb-6">Gest√£o de Estoque</h2>
          <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-blue-50 p-4 rounded-lg">
              <h3 class="font-semibold text-blue-800">Estoque Ativo</h3>
              <p class="text-2xl font-bold text-blue-600">2.847</p>
              <p class="text-sm text-blue-500">Produtos anunciados</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="font-semibold text-gray-800">Estoque Inativo</h3>
              <p class="text-2xl font-bold text-gray-600">1.234</p>
              <p class="text-sm text-gray-500">N√£o anunciados</p>
            </div>
            <div class="bg-green-50 p-4 rounded-lg">
              <h3 class="font-semibold text-green-800">Discord Bot</h3>
              <p class="text-2xl font-bold text-green-600">1.892</p>
              <p class="text-sm text-green-500">R$ 284.800</p>
            </div>
            <div class="bg-purple-50 p-4 rounded-lg">
              <h3 class="font-semibold text-purple-800">GGMAX</h3>
              <p class="text-2xl font-bold text-purple-600">955</p>
              <p class="text-sm text-purple-500">R$ 143.250</p>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div>
              <h3 class="text-lg font-semibold mb-4">Distribui√ß√£o por Plataforma</h3>
              <div class="chart-container">
                <canvas id="platformChart"></canvas>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-semibold mb-4">Valor do Estoque por Jogo</h3>
              <div class="space-y-3">
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                  <span>Genshin Impact</span>
                  <span class="font-semibold">R$ 156.400</span>
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                  <span>Honkai Star Rail</span>
                  <span class="font-semibold">R$ 98.750</span>
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                  <span>Zenless Zone Zero</span>
                  <span class="font-semibold">R$ 87.300</span>
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                  <span>Wuthering Waves</span>
                  <span class="font-semibold">R$ 54.200</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="resellers" class="tab-content hidden">
        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-6 rounded-xl text-white mb-6">
          <h2 class="text-2xl font-bold mb-2">Portal Exclusivo - Revendedores</h2>
          <p class="opacity-90">√Årea restrita para parceiros autorizados</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
          <div class="bg-white p-6 rounded-xl card-shadow">
            <h3 class="font-semibold mb-2">Revendedores Ativos</h3>
            <p class="text-3xl font-bold text-indigo-600">24</p>
            <p class="text-sm text-gray-600">+3 este m√™s</p>
          </div>
          <div class="bg-white p-6 rounded-xl card-shadow">
            <h3 class="font-semibold mb-2">Volume de Vendas</h3>
            <p class="text-3xl font-bold text-green-600">R$ 89.450</p>
            <p class="text-sm text-gray-600">√öltimos 30 dias</p>
          </div>
          <div class="bg-white p-6 rounded-xl card-shadow">
            <h3 class="font-semibold mb-2">Comiss√£o M√©dia</h3>
            <p class="text-3xl font-bold text-purple-600">15,8%</p>
            <p class="text-sm text-gray-600">Por transa√ß√£o</p>
          </div>
        </div>
        <div class="bg-white p-6 rounded-xl card-shadow">
          <h3 class="text-lg font-semibold mb-4">Top Revendedores</h3>
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead>
                <tr class="border-b">
                  <th class="text-left p-3">Revendedor</th>
                  <th class="text-left p-3">Vendas (30d)</th>
                  <th class="text-left p-3">Comiss√£o</th>
                  <th class="text-left p-3">Status</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b hover:bg-gray-50">
                  <td class="p-3">GameStore Pro</td>
                  <td class="p-3">R$ 23.450</td>
                  <td class="p-3">R$ 3.518</td>
                  <td class="p-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Ativo</span></td>
                </tr>
                <tr class="border-b hover:bg-gray-50">
                  <td class="p-3">Digital Games BR</td>
                  <td class="p-3">R$ 18.920</td>
                  <td class="p-3">R$ 2.838</td>
                  <td class="p-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Ativo</span></td>
                </tr>
                <tr class="border-b hover:bg-gray-50">
                  <td class="p-3">Anime Accounts</td>
                  <td class="p-3">R$ 15.670</td>
                  <td class="p-3">R$ 2.351</td>
                  <td class="p-3"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Pendente</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="competition" class="tab-content hidden">
        <div class="bg-white p-6 rounded-xl card-shadow mb-6">
          <h2 class="text-2xl font-bold mb-6">An√°lise Competitiva</h2>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <div>
              <h3 class="text-lg font-semibold mb-4">Posicionamento de Pre√ßos</h3>
              <div class="chart-container">
                <canvas id="priceComparisonChart"></canvas>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-semibold mb-4">Market Share por Concorrente</h3>
              <div class="space-y-3">
                <div class="flex justify-between items-center p-3 bg-blue-50 rounded">
                  <span class="font-medium">Sua Empresa</span>
                  <div class="flex items-center space-x-2">
                    <div class="w-24 bg-gray-200 rounded-full h-2"><div class="bg-blue-600 h-2 rounded-full" style="width: 23.4%"></div></div>
                    <span class="text-sm font-semibold">23,4%</span>
                  </div>
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                  <span>Concorrente A</span>
                  <div class="flex items-center space-x-2">
                    <div class="w-24 bg-gray-200 rounded-full h-2"><div class="bg-red-500 h-2 rounded-full" style="width: 28.7%"></div></div>
                    <span class="text-sm">28,7%</span>
                  </div>
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                  <span>Concorrente B</span>
                  <div class="flex items-center space-x-2">
                    <div class="w-24 bg-gray-200 rounded-full h-2"><div class="bg-orange-500 h-2 rounded-full" style="width: 19.2%"></div></div>
                    <span class="text-sm">19,2%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="simulator" class="tab-content hidden">
        <div class="bg-white p-6 rounded-xl card-shadow">
          <h2 class="text-2xl font-bold mb-6">Simulador de Pre√ßos</h2>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div>
              <h3 class="text-lg font-semibold mb-4">Configura√ß√£o do Produto</h3>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium mb-2">Jogo</label>
                  <select id="simGame" class="w-full p-3 border rounded-lg">
                    <option>Genshin Impact</option>
                    <option>Honkai Star Rail</option>
                    <option>Zenless Zone Zero</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2">Custo de Aquisi√ß√£o (USD)</label>
                  <input type="number" id="costUSD" value="25" class="w-full p-3 border rounded-lg" onchange="calculateProfit()" />
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2">Cota√ß√£o do D√≥lar</label>
                  <input type="number" id="dollarRate" value="5.20" step="0.01" class="w-full p-3 border rounded-lg" onchange="calculateProfit()" />
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2">Pre√ßo de Venda Desejado (R$)</label>
                  <input type="number" id="salePrice" value="180" class="w-full p-3 border rounded-lg" onchange="calculateProfit()" />
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2">Taxa da Plataforma (%)</label>
                  <input type="number" id="platformFee" value="8" class="w-full p-3 border rounded-lg" onchange="calculateProfit()" />
                </div>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-semibold mb-4">An√°lise de Viabilidade</h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                  <p class="text-sm text-gray-600">Custo Total (R$)</p>
                  <p class="text-2xl font-bold" id="totalCost">R$ 130,00</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                  <p class="text-sm text-gray-600">Receita L√≠quida</p>
                  <p class="text-2xl font-bold text-green-600" id="netRevenue">R$ 165,60</p>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                  <p class="text-sm text-gray-600">Lucro</p>
                  <p class="text-2xl font-bold text-blue-600" id="profit">R$ 35,60</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                  <p class="text-sm text-gray-600">Margem de Lucro</p>
                  <p class="text-2xl font-bold text-purple-600" id="margin">19,8%</p>
                </div>
              </div>
              <div class="mt-6">
                <h4 class="font-semibold mb-3">Compara√ß√£o com Concorrentes</h4>
                <div class="space-y-2">
                  <div class="flex justify-between items-center p-2 bg-red-50 rounded">
                    <span class="text-sm">Menor pre√ßo do mercado</span>
                    <span class="font-semibold text-red-600">R$ 165,00</span>
                  </div>
                  <div class="flex justify-between items-center p-2 bg-yellow-50 rounded">
                    <span class="text-sm">Pre√ßo m√©dio</span>
                    <span class="font-semibold text-yellow-600">R$ 195,00</span>
                  </div>
                  <div class="flex justify-between items-center p-2 bg-green-50 rounded">
                    <span class="text-sm">Seu pre√ßo</span>
                    <span class="font-semibold text-green-600">R$ 180,00</span>
                  </div>
                </div>
                <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                  <p class="text-sm text-blue-800" id="recommendation">
                    ‚úÖ Pre√ßo competitivo! Voc√™ pode vender R$ 15 abaixo da m√©dia e ainda manter boa margem.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Timestamp
    document.getElementById('lastUpdate').textContent = new Date().toLocaleString('pt-BR');

    // Navega√ß√£o
    function showTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('tab-active'));
      document.getElementById(tabName).classList.remove('hidden');
      document.querySelector('[data-tab=\"' + tabName + '\"]').classList.add('tab-active');
    }

    // Chart base options
    const chartOptions = { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } };

    // Dados por per√≠odo (visual/hardcoded) - TODA a dashboard principal reage a isso
    const periodData = {
      dia: {
        label: 'Hoje (horas)',
        labels: ['08h', '10h', '12h', '14h', '16h', '18h', '20h', '22h'],
        revenueSeries: [800, 1200, 1500, 1800, 2200, 2600, 3000, 3200],
        totals: { netRevenue: 8320, units: 230, partnersRevenue: 2450, clients: 62 },
        games: [
          { name:'Genshin Impact', revenue: 1296.00, qty: 36 },
          { name:'Honkai Star Rail', revenue: 948.00, qty: 26 },
          { name:'Zenless Zone Zero', revenue: 792.00, qty: 22 },
          { name:'Wuthering Waves', revenue: 563.00, qty: 15 },
          { name:'Solo Leveling', revenue: 512.00, qty: 14 },
          { name:'Dragon Ball Legends', revenue: 548.00, qty: 15 }
        ],
        creators: [
          { name:'Tohka', coupons: 38, commission: 420.00, netRevenue: 1680.00 },
          { name:'Wez',   coupons: 31, commission: 360.00, netRevenue: 1420.00 },
          { name:'Yato',  coupons: 44, commission: 520.00, netRevenue: 2020.00 },
          { name:'Polar', coupons: 19, commission: 210.00, netRevenue: 780.00 }
        ],
        topProducts: [
          { tag:'GI', name:'Genshin Impact - AR 60', qty: 36, revenue: 1296 },
          { tag:'HSR', name:'Honkai Star Rail - TL 70', qty: 26, revenue: 948 },
          { tag:'ZZZ', name:'Zenless Zone Zero - IK 60', qty: 22, revenue: 792 },
          { tag:'WW', name:'Wuthering Waves - Endgame', qty: 15, revenue: 563 },
          { tag:'SLA', name:'Solo Leveling - Pack Reroll', qty: 14, revenue: 512 }
        ],
        periodLabel: 'Hoje',
        deltas: { netRevenue: '+5.4%', units: '+3.1%' }
      },
      semana: {
        label: '√öltimos 7 dias',
        labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b', 'Dom'],
        revenueSeries: [5200, 6100, 5900, 6400, 7000, 7550, 7130],
        totals: { netRevenue: 45280, units: 1247, partnersRevenue: 12450, clients: 342 },
        games: [
          { name:'Genshin Impact', revenue: 8960.00, qty: 240 },
          { name:'Honkai Star Rail', revenue: 6780.00, qty: 186 },
          { name:'Zenless Zone Zero', revenue: 5240.00, qty: 144 },
          { name:'Wuthering Waves', revenue: 3780.00, qty: 104 },
          { name:'Solo Leveling', revenue: 3220.00, qty: 88 },
          { name:'Dragon Ball Legends', revenue: 3490.00, qty: 96 }
        ],
        creators: [
          { name:'Tohka', coupons: 182, commission: 2450.00, netRevenue: 9360.00 },
          { name:'Wez',   coupons: 156, commission: 1980.00, netRevenue: 7820.00 },
          { name:'Yato',  coupons: 204, commission: 2890.00, netRevenue: 10840.00 },
          { name:'Polar', coupons: 132, commission: 1540.00, netRevenue: 5120.00 }
        ],
        topProducts: [
          { tag:'GI', name:'Genshin Impact - AR 60', qty: 324, revenue: 12960 },
          { tag:'HSR', name:'Honkai Star Rail - TL 70', qty: 287, revenue: 9480 },
          { tag:'ZZZ', name:'Zenless Zone Zero - IK 60', qty: 198, revenue: 7920 },
          { tag:'WW', name:'Wuthering Waves - Endgame', qty: 156, revenue: 5620 },
          { tag:'SLA', name:'Solo Leveling - Pack Reroll', qty: 134, revenue: 4830 }
        ],
        periodLabel: '√öltimos 7 dias',
        deltas: { netRevenue: '+12.5%', units: '+8.3%' }
      },
      mes: {
        label: '√öltimos 30 dias',
        labels: ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'],
        revenueSeries: [12000, 13500, 13000, 15280],
        totals: { netRevenue: 68920, units: 1930, partnersRevenue: 18050, clients: 512 },
        games: [
          { name:'Genshin Impact', revenue: 12960.00, qty: 324 },
          { name:'Honkai Star Rail', revenue: 9480.00, qty: 287 },
          { name:'Zenless Zone Zero', revenue: 7920.00, qty: 198 },
          { name:'Wuthering Waves', revenue: 5620.00, qty: 156 },
          { name:'Solo Leveling', revenue: 4830.00, qty: 134 },
          { name:'Dragon Ball Legends', revenue: 5190.00, qty: 148 }
        ],
        creators: [
          { name:'Tohka', coupons: 420, commission: 5600.00, netRevenue: 21400.00 },
          { name:'Wez',   coupons: 358, commission: 4540.00, netRevenue: 17600.00 },
          { name:'Yato',  coupons: 468, commission: 6480.00, netRevenue: 23850.00 },
          { name:'Polar', coupons: 310, commission: 3610.00, netRevenue: 12600.00 }
        ],
        topProducts: [
          { tag:'GI', name:'Genshin Impact - AR 60', qty: 520, revenue: 20800 },
          { tag:'HSR', name:'Honkai Star Rail - TL 70', qty: 420, revenue: 13860 },
          { tag:'ZZZ', name:'Zenless Zone Zero - IK 60', qty: 310, revenue: 12400 },
          { tag:'WW', name:'Wuthering Waves - Endgame', qty: 220, revenue: 7920 },
          { tag:'SLA', name:'Solo Leveling - Pack Reroll', qty: 180, revenue: 6480 }
        ],
        periodLabel: '√öltimos 30 dias',
        deltas: { netRevenue: '+18.9%', units: '+12.1%' }
      },
      custom: {
        label: 'Per√≠odo Personalizado',
        labels: ['Per√≠odo 1', 'Per√≠odo 2', 'Per√≠odo 3', 'Per√≠odo 4'],
        revenueSeries: [9000, 9800, 10400, 11000],
        totals: { netRevenue: 40200, units: 1080, partnersRevenue: 9800, clients: 260 },
        games: [
          { name:'Genshin Impact', revenue: 8400.00, qty: 230 },
          { name:'Honkai Star Rail', revenue: 7200.00, qty: 195 },
          { name:'Zenless Zone Zero', revenue: 6100.00, qty: 165 },
          { name:'Wuthering Waves', revenue: 4500.00, qty: 120 },
          { name:'Solo Leveling', revenue: 3800.00, qty: 102 },
          { name:'Dragon Ball Legends', revenue: 4000.00, qty: 108 }
        ],
        creators: [
          { name:'Tohka', coupons: 210, commission: 2700.00, netRevenue: 10400.00 },
          { name:'Wez',   coupons: 182, commission: 2300.00, netRevenue: 8800.00 },
          { name:'Yato',  coupons: 236, commission: 3100.00, netRevenue: 12700.00 },
          { name:'Polar', coupons: 150, commission: 1800.00, netRevenue: 6300.00 }
        ],
        topProducts: [
          { tag:'GI', name:'Genshin Impact - AR 60', qty: 230, revenue: 8400 },
          { tag:'HSR', name:'Honkai Star Rail - TL 70', qty: 195, revenue: 7200 },
          { tag:'ZZZ', name:'Zenless Zone Zero - IK 60', qty: 165, revenue: 6100 },
          { tag:'WW', name:'Wuthering Waves - Endgame', qty: 120, revenue: 4500 },
          { tag:'SLA', name:'Solo Leveling - Pack Reroll', qty: 102, revenue: 3800 }
        ],
        periodLabel: 'Personalizado',
        deltas: { netRevenue: '+9.2%', units: '+6.4%' }
      }
    };

    // Chart inicial
    const revenueCtx = document.getElementById('revenueChart').getContext('2d');
    let revenueChart = new Chart(revenueCtx, {
      type: 'line',
      data: {
        labels: periodData.dia.labels,
        datasets: [{ 
          label: 'Faturamento L√≠quido',
          data: periodData.dia.revenueSeries,
          borderColor: '#4f46e5',
          backgroundColor: 'rgba(79,70,229,0.1)',
          tension: 0.4,
          fill: true
        }]
      },
      options: chartOptions
    });

    // Helpers
    const fmtBRL = v => 'R$ ' + v.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
    const setText = (id, text) => document.getElementById(id).textContent = text;

    // Atualiza KPIs
    function updateKPIs(periodKey) {
      const t = periodData[periodKey].totals;
      const deltas = periodData[periodKey].deltas;
      const avgTicket = t.units ? (t.netRevenue / t.units) : 0;

      setText('kpiNetRevenue', fmtBRL(t.netRevenue));
      setText('kpiUnits', t.units.toLocaleString('pt-BR'));
      setText('kpiPartnersRevenue', fmtBRL(t.partnersRevenue));
      setText('kpiClients', t.clients.toLocaleString('pt-BR'));
      setText('kpiAvgTicket', fmtBRL(avgTicket));

      setText('kpiNetRevenueDelta', `‚Üó ${deltas.netRevenue} vs per√≠odo anterior`);
      setText('kpiUnitsDelta', `‚Üó ${deltas.units} vs per√≠odo anterior`);
    }

    // Atualiza tabela de jogos
    function updateGamesTable(periodKey) {
      const body = document.getElementById('gamesTableBody');
      const totalRevenueCell = document.getElementById('gamesTotalRevenue');
      const totalQtyCell = document.getElementById('gamesTotalQty');
      const p = periodData[periodKey];
      document.getElementById('periodLabel').textContent = p.periodLabel;

      body.innerHTML = '';
      let totalRevenue = 0;
      let totalQty = 0;
      p.games.forEach(g => {
        totalRevenue += g.revenue;
        totalQty += g.qty;
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
          <td class="p-3">${g.name}</td>
          <td class="p-3 number-cell">${fmtBRL(g.revenue)}</td>
          <td class="p-3 number-cell">${g.qty.toLocaleString('pt-BR')}</td>
        `;
        body.appendChild(tr);
      });
      totalRevenueCell.textContent = fmtBRL(totalRevenue);
      totalQtyCell.textContent = totalQty.toLocaleString('pt-BR');
    }

    // Atualiza criadores (ROI + rank)
    function updateCreators(periodKey) {
      const creatorsBody = document.getElementById('creatorsBody');
      const creators = periodData[periodKey].creators.map(c => ({ ...c, roi: (c.netRevenue / (c.commission || 1)) }));
      const ranked = creators.sort((a, b) => b.roi - a.roi).map((c, i) => ({ ...c, rank: i + 1 }));

      creatorsBody.innerHTML = '';
      ranked.forEach(c => {
        const tr = document.createElement('tr');
        tr.className = 'border-b hover:bg-gray-50';
        tr.innerHTML = `
          <td class="p-3">${c.name}</td>
          <td class="p-3 number-cell">${c.coupons.toLocaleString('pt-BR')}</td>
          <td class="p-3 number-cell">${fmtBRL(c.commission)}</td>
          <td class="p-3 number-cell">${fmtBRL(c.netRevenue)}</td>
          <td class="p-3 number-cell">${c.roi.toFixed(2)}</td>
          <td class="p-3 number-cell">${c.rank}</td>
        `;
        creatorsBody.appendChild(tr);
      });
    }

    // Atualiza Top Produtos
    function updateTopProducts(periodKey) {
      const container = document.getElementById('topProducts');
      const items = periodData[periodKey].topProducts;
      container.innerHTML = '';
      const colorMap = { GI:'bg-blue-500', HSR:'bg-purple-500', ZZZ:'bg-orange-500', WW:'bg-teal-500', SLA:'bg-green-500', DBL:'bg-yellow-500' };

      items.forEach(item => {
        const div = document.createElement('div');
        div.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
        div.innerHTML = `
          <div class="flex items-center space-x-3">
            <div class="w-8 h-8 ${colorMap[item.tag] || 'bg-gray-400'} rounded game-icon flex items-center justify-center text-white text-xs">${item.tag}</div>
            <div>
              <p class="font-medium">${item.name}</p>
              <p class="text-sm text-gray-600">${item.qty} vendas</p>
            </div>
          </div>
          <span class="text-green-600 font-semibold">${fmtBRL(item.revenue)}</span>
        `;
        container.appendChild(div);
      });
    }

    // Seletor de per√≠odo
    function setPeriod(periodKey) {
      document.getElementById('customRange').classList.toggle('hidden', periodKey !== 'custom');
      ['dia','semana','mes','custom'].forEach(k => {
        const btn = document.getElementById('btn-' + k);
        btn.setAttribute('aria-pressed', String(k === periodKey));
      });

      const p = periodData[periodKey];
      // Atualiza gr√°fico
      revenueChart.data.labels = p.labels;
      revenueChart.data.datasets[0].data = p.revenueSeries;
      revenueChart.update();

      // Atualiza todos os indicadores
      updateKPIs(periodKey);
      updateGamesTable(periodKey);
      updateCreators(periodKey);
      updateTopProducts(periodKey);
    }

    // Gr√°ficos das outras abas (dummy)
    const categoryCtx = document.getElementById('categoryChart')?.getContext('2d');
    if (categoryCtx) {
      new Chart(categoryCtx, {
        type: 'radar',
        data: {
          labels: ['Genshin', 'HSR', 'ZZZ', 'WW', 'SLA', 'DBL'],
          datasets: [{ label: 'Performance', data: [85, 78, 65, 52, 48, 58], borderColor: '#8b5cf6', backgroundColor: 'rgba(139, 92, 246, 0.2)' }]
        },
        options: chartOptions
      });
    }

    const evolutionCtx = document.getElementById('evolutionChart')?.getContext('2d');
    if (evolutionCtx) {
      new Chart(evolutionCtx, {
        type: 'line',
        data: { labels: ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'], datasets: [{ label: 'Vendas', data: [280, 320, 295, 324], borderColor: '#10b981', tension: 0.4 }] },
        options: chartOptions
      });
    }

    const platformCtx = document.getElementById('platformChart')?.getContext('2d');
    if (platformCtx) {
      new Chart(platformCtx, {
        type: 'pie',
        data: { labels: ['Discord Bot', 'GGMAX'], datasets: [{ data: [1892, 955], backgroundColor: ['#10b981', '#8b5cf6'] }] },
        options: chartOptions
      });
    }

    const priceCtx = document.getElementById('priceComparisonChart')?.getContext('2d');
    if (priceCtx) {
      new Chart(priceCtx, {
        type: 'bar',
        data: {
          labels: ['Genshin AR60', 'HSR TL70', 'ZZZ IK60'],
          datasets: [
            { label: 'Seu Pre√ßo', data: [180, 150, 120], backgroundColor: '#4f46e5' },
            { label: 'Menor Concorrente', data: [165, 140, 110], backgroundColor: '#ef4444' },
            { label: 'M√©dia Mercado', data: [195, 165, 135], backgroundColor: '#f59e0b' }
          ]
        },
        options: chartOptions
      });
    }

    // Simulador
    function calculateProfit() {
      const costUSD = parseFloat(document.getElementById('costUSD').value) || 0;
      const dollarRate = parseFloat(document.getElementById('dollarRate').value) || 0;
      const salePrice = parseFloat(document.getElementById('salePrice').value) || 0;
      const platformFee = parseFloat(document.getElementById('platformFee').value) || 0;
      const totalCost = costUSD * dollarRate;
      const netRevenue = salePrice * (1 - platformFee / 100);
      const profit = netRevenue - totalCost;
      const margin = (profit / salePrice) * 100;
      document.getElementById('totalCost').textContent = `R$ ${totalCost.toFixed(2)}`;
      document.getElementById('netRevenue').textContent = `R$ ${netRevenue.toFixed(2)}`;
      document.getElementById('profit').textContent = `R$ ${profit.toFixed(2)}`;
      document.getElementById('margin').textContent = `${margin.toFixed(1)}%`;
      const recommendation = document.getElementById('recommendation');
      if (margin > 20) {
        recommendation.innerHTML = '‚úÖ Excelente margem! Voc√™ pode considerar reduzir o pre√ßo para ser mais competitivo.';
        recommendation.className = 'text-sm text-green-800';
      } else if (margin > 10) {
        recommendation.innerHTML = '‚ö†Ô∏è Margem adequada. Monitore a concorr√™ncia para ajustes.';
        recommendation.className = 'text-sm text-yellow-800';
      } else {
        recommendation.innerHTML = '‚ùå Margem baixa. Considere renegociar custos ou aumentar pre√ßo.';
        recommendation.className = 'text-sm text-red-800';
      }
    }
    calculateProfit();

    // Inicializa√ß√µes
    setPeriod('dia');
  </script>
</body>
</html>
